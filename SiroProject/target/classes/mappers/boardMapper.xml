<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="global.seshool.bank.dao.BoardDAO">

		<insert id="insertBoard" parameterType="Board" >
		INSERT INTO QNABOARD
		(	
			BOARDNO,
			CUSTID,
			TITLE,
			CONTENT,
			REGDATE,
			<if test="originalfile != null">
			ORIGINALFILE,
			SAVEDFILE,
			</if>
			HITCOUNT
			<if test ='replytext !=null and replytext != ""'>
			,REPLYTEXT,
			REPDATE
			</if>
		)
		VALUES
		(
		QNABOARD_SEQ.nextval
			, #{custid}
			, #{title}
			, #{content}
			, sysdate
			<if test="originalfile != null">
			, #{originalfile}
			, #{savedfile}
			</if>
			, #{hitcount}
			<if test ='replytext !=null and replytext != ""'>
			, #{replytext}
			, #{replydate}
			</if>
		)
		</insert>
		
		<select id="selectOne" parameterType="Board" resultType="Board">
		Select * From QNABOARD
		where boardno = #{boardno}
		</select>

<!-- RowBounds를 사용하는 Case -->
	<select id="selectAll" resultType="Board" parameterType="map">
		SELECT
			BOARDNO,
			CUSTID,
			TITLE,
			CONTENT,
			to_char(regdate, 'YYYY-MM-DD') as regdate,
			ORIGINALFILE,
			SAVEDFILE,
			HITCOUNT,
			REPLYTEXT,
			REPDATE
		FROM QNABOARD
			<if test="searchItem != null">
			WHERE ${searchItem} LIKE '%'||#{searchWord}||'%'
			</if>
		ORDER BY BOARDNO DESC
	</select>
	
	<select id="getBoardCount" parameterType="map" resultType="int">
	SELECT count(*)
	FROM QNABOARD
	<if test="searchItem != null">
	WHERE ${searchItem} LIKE '%'||#{searchWord} || '%'
	</if>
	</select>
	


</mapper>