<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.seschool.bank.dao.CustomerMapper">
	<select id="searchCustomer" parameterType="Customer" resultType="Customer">
		SELECT *
		FROM customer
		WHERE name = #{name}
	    AND email = #{email}
	    <choose>
	    	<when test="custid == null or custid == ''"></when>
	    	<otherwise>
	    		AND custid = #{custid}
	    	</otherwise>
	    </choose>
	</select>
	
	<select id="selectCustomer" parameterType="String" resultType="Customer">
		SELECT *
		FROM customer
		WHERE custid = #{custid}
	</select>
	
	<select id="login" parameterType="Customer" resultType="Customer">
		SELECT *
		FROM customer
		WHERE custid = #{custid}
		 AND password = #{password}
	</select>
	
	<insert id="insertCustomer" parameterType="Customer">
		INSERT INTO
			customer
		VALUES(#{custid}, #{password}, #{email}, #{division}, #{name}, #{idno}, #{address})
	</insert>
	
	<update id="updateCustomer" parameterType="Customer">
		UPDATE
			customer
		SET
			email = #{email},
			division = #{division},
			name = #{name},
			address = #{address}
			<choose>
	    	<when test="password == null or password == ''"></when>
	    	<otherwise>
	    		,password = #{password}
	    	</otherwise>
	 	   </choose>
		WHERE
			custid = #{custid}
	</update>
</mapper>